<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>DreamReal Imageboard Tool</title>

<!-- Favicon -->
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23666'><path d='M19 18H6c-2.21 0-4-1.79-4-4s1.79-4 4-4h.71C7.37 7.69 9.48 6 12 6c3.04 0 5.5 2.46 5.5 5.5v.5H19c1.66 0 3 1.34 3 3s-1.34 3-3 3z'/></svg>" type="image/svg+xml">

<!-- Icons & Markdown -->
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js"></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/marked/15.0.7/marked.min.js"></script>

<!-- ZIP + helpers -->
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/png-chunk-text/browser.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/piexifjs@1.0.6/piexif.min.js"></script>

<!-- PDF generation -->
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<link rel="stylesheet" href="style.css?v=20250531-7pt5-note">

</head>
<body>
<div class="app">

  <!-- Image Editor link in top right corner -->
  <a href="image-editor.html" class="image-editor-link top-right" onclick="saveStateAndNavigate(event)">
    <i class="fas fa-edit"></i> Precision Image Editor
  </a>

  <!-- chat column -->
  <div class="chat">
    <div class="hdr">
      <div class="hdr-top">
        <svg width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path d="M19 18H6c-2.21 0-4-1.79-4-4s1.79-4 4-4h.71C7.37 7.69 9.48 6 12 6c3.04 0 5.5 2.46 5.5 5.5v.5H19c1.66 0 3 1.34 3 3s-1.34 3-3 3z"/></svg>
        <h2>DreamReal Imageboard Tool</h2>
      </div>
    </div>
    
    <div class="input-section-compact">
      <h3 style="display: flex; justify-content: space-between; align-items: center; margin: 0 0 3px 0;">AD BRIEF <button class="small-upload-btn" id="uploadBriefBtn" title="Upload brief file" style="position: static; margin-left: auto;"><i class="fas fa-upload"></i></button></h3>
      <textarea id="adBriefText" placeholder="Describe your ad here or upload a brief..."></textarea>
    </div>
    
    <div class="input-section-compact">
      <h3 style="display: flex; justify-content: space-between; align-items: center; margin: 0 0 3px 0;">VISUAL STYLE ELEMENTS (OPTIONAL) <button class="small-upload-btn" id="uploadStyleBtn" title="Upload style file (PDF, Word, TXT, RTF, etc.)" style="position: static; margin-left: auto;"><i class="fas fa-upload"></i></button></h3>
      <textarea id="styleText" placeholder="Enter visual style here or upload a file (PDF, Word, TXT, etc.)..."></textarea>
    </div>

    <div id="msgs" class="msgs"><div class="msg ai">Welcome! I'll help you create visual storyboards from your ad brief.<br><br>To get started:<br>1. Enter your ad description in the text field above (or upload a file)<br>2. Optionally add visual style details (or upload PDF, Word, TXT, etc.)<br>3. Click "Generate Photos" to create your storyboard<br>4. Use "Regenerate All Scenes" to regenerate all existing images<br><br>ðŸ’¡ <strong>New:</strong> You can now upload various document formats (PDF, Word, TXT, RTF, etc.) for both ad briefs and visual style references!<br><br>I'm here to help refine and adjust your visuals as needed.</div></div>

    <div class="chat-in">
      <textarea id="chatIn" placeholder="Message DreamReal AI to make changes..." rows="1"></textarea>
      <div class="btn-stack">
        <button id="send"><i class="fas fa-paper-plane"></i></button>
        <button id="pause"><i class="fas fa-stop"></i></button>
        <button id="attach"><i class="fas fa-paperclip"></i></button>
      </div>
    </div>

    <button id="genPrompts" class="primary-action-btn"><i class="fas fa-wand-magic-sparkles"></i>&nbsp;Generate Photos</button>
    <div style="text-align: center; font-size: 7pt; color: var(--secondary-text); opacity: 0.8; margin-top: 6px; padding: 0 24px;">Note: "1:", "2:", etc., can be used as shorthand scene references</div>
    <div id="chips" class="file-chips"></div>
    <div id="uploadedFileIndicator" style="padding: 8px 24px; font-size: 12px; color: var(--secondary-text); display: none;"></div>

    <!-- hidden inputs -->
    <input type="file" id="fileInput" multiple hidden>
    <input type="file" id="styleInput" accept=".pdf,.doc,.docx,.txt,.rtf,.odt,.md,.csv,.json,.xml" hidden>
    <input type="file" id="briefInput" accept=".pdf,.doc,.docx,.txt,.rtf,.odt,.md,.csv,.json,.xml" hidden>
    <input type="file" id="checkpointInput" accept=".json" hidden>
  </div>

  <!-- scenes -->
  <div id="scenes" class="scenes">
    <div class="scenes-header">
      <div class="scene-actions-header">
        <button id="regenerateAllImages" class="gen-all-btn" style="background:var(--accent-color); color:var(--button-text); border:none; border-radius:18px; padding:7px 14px; font-size:12px; font-weight: 500; cursor:pointer; transition: background-color 0.15s ease, box-shadow 0.15s ease;"><i class="fas fa-sync-alt"></i>&nbsp;Regenerate All Scenes</button>
        <button id="btnCheckpointMoved" class="secondary-btn" style="background-color: #ffffff !important; color: var(--primary-text) !important; border: 1px solid var(--border-color) !important; font-size: 12px !important; padding: 7px 14px !important; border-radius: 18px !important;"><i class="fas fa-upload"></i>&nbsp;Upload Checkpoint (JSON)</button>
        <button id="clearAllBtn" class="secondary-btn" style="background-color: #ffffff !important; color: var(--primary-text) !important; border: 1px solid var(--border-color) !important; font-size: 12px !important; padding: 7px 14px !important; border-radius: 18px !important; min-width: 180px !important;"><i class="fas fa-trash-alt"></i>&nbsp;Clear All</button>
        <select id="imageModel" style="display: none;">
          <option value="imagen3">Imagen 3</option>
          <option value="imagen4" selected>Imagen 4</option>
        </select>
      </div>
    </div>
    <div id="scenesGrid" class="scenes-grid">
      <!-- Scenes will be populated here -->
    </div>
    <!-- Hidden storage for prompts -->
    <div id="hiddenPrompts" class="hidden-prompts">
      <!-- Hidden textareas for prompts will go here -->
    </div>
  </div>
</div>

<script src="js/api.js?v=20250531-7pt5-note"></script>
<script src="js/ui.js?v=20250531-7pt5-note"></script>
<script src="js/main.js?v=20250531-7pt5-note"></script>
</body>
</html>