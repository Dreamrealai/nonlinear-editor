# Test Reports Directory

This directory contains automated test health monitoring reports generated by the test monitoring scripts.

## Generated Reports

### Flaky Test Detection

**File:** `flaky-tests.json`

**Generated by:** `npm run test:flaky`

**Purpose:** Identifies tests that have inconsistent pass/fail behavior across multiple test runs.

**Structure:**
```json
{
  "timestamp": "ISO 8601 timestamp",
  "iterations": "Number of test runs performed",
  "totalFlakyTests": "Count of flaky tests found",
  "flakyTests": [
    {
      "suite": "Test file path",
      "name": "Full test name",
      "passRate": "Percentage of runs that passed (0-100)",
      "totalRuns": "Total number of runs",
      "passCount": "Number of successful runs",
      "failCount": "Number of failed runs",
      "avgDuration": "Average execution time in ms"
    }
  ]
}
```

### Test Performance Monitoring

**File:** `test-performance.json`

**Generated by:** `npm run test:perf`

**Purpose:** Tracks test execution times and identifies slow tests that may need optimization.

**Structure:**
```json
{
  "timestamp": "ISO 8601 timestamp",
  "threshold": "Slow test threshold in ms",
  "totalTests": "Total tests analyzed",
  "slowTests": "Count of tests exceeding threshold",
  "avgDuration": "Average test duration in ms",
  "medianDuration": "Median test duration in ms",
  "p95Duration": "95th percentile duration in ms",
  "p99Duration": "99th percentile duration in ms",
  "fastestTest": {
    "suite": "Test file path",
    "name": "Test name",
    "duration": "Duration in ms"
  },
  "slowestTest": {
    "suite": "Test file path",
    "name": "Test name",
    "duration": "Duration in ms"
  },
  "slowTestList": [
    {
      "suite": "Test file path",
      "name": "Test name",
      "duration": "Duration in ms",
      "threshold": "Threshold used",
      "exceedBy": "Amount over threshold in ms"
    }
  ],
  "suitePerformance": [
    {
      "suite": "Test suite path",
      "totalTests": "Number of tests in suite",
      "totalDuration": "Total time for all tests in ms",
      "avgDuration": "Average duration per test in ms",
      "slowTests": "Count of slow tests in suite"
    }
  ]
}
```

## Usage

### Detect Flaky Tests

```bash
# Run with default settings (10 iterations)
npm run test:flaky

# Run with custom iterations (2-20)
npm run test:flaky 5

# Run on specific test pattern
npm run test:flaky 10 "api/**"
```

### Monitor Test Performance

```bash
# Run with default threshold (5000ms)
npm run test:perf

# Run with custom threshold
npm run test:perf 3000
```

## Report Retention

Reports in this directory are:
- Generated on-demand when running monitoring scripts
- Overwritten on each run (no history kept)
- Not committed to version control (in .gitignore)
- Useful for local analysis and debugging

For historical tracking, consider:
- Archiving reports after each run
- Integrating with CI/CD to collect metrics over time
- Using test metrics dashboard tools

## See Also

- [TESTING_BEST_PRACTICES.md](/docs/TESTING_BEST_PRACTICES.md) - Complete testing guide with monitoring documentation
- [REGRESSION_PREVENTION.md](/docs/REGRESSION_PREVENTION.md) - CI/CD and regression testing
- [TESTING_UTILITIES.md](/docs/TESTING_UTILITIES.md) - Test utility reference
